<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- Generated by pod2coolhtml 1.101
  -- Using Pod::CoolHTML 1.104 , (C) 1997 by Eryq (eryq@zeegee.com).
  --
  -- DO NOT EDIT THIS HTML FILE! All your changes will be lost.
  -- Edit the POD or Perl file that was used to create it.
  -->
<HTML>

<HEAD>
<TITLE>IO::AtomicFile</TITLE>
</HEAD>
<BODY BGCOLOR=#CCCCCC LINK=#C00000 ALINK=#FF2020 VLINK=#900000>
<A NAME="__top"> </A><CENTER><TABLE BORDER=2 CELLPADDING=2 WIDTH=100%>

<TR>
<TD WIDTH=25% ALIGN=CENTER><B><FONT SIZE=+1>
<A HREF="Stringy.pm.html">IO::Stringy</A></FONT></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
IO::AtomicFile</SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Lines.pm.html">IO::Lines</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Scalar.pm.html">IO::Scalar</A></SMALL></B></TD>

<TR>
<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="ScalarArray.pm.html">IO::ScalarArray</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Stringy.pm.html">IO::Stringy</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Wrap.pm.html">IO::Wrap</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="WrapTie.pm.html">IO::WrapTie</A></SMALL></B></TD>
</TABLE></CENTER>

<P><TABLE WIDTH="100%">

<TR VALIGN="TOP"><TD ALIGN="LEFT"><CENTER>
<H1><FONT SIZE=7 COLOR=#600020><B>IO::<BR>AtomicFile</B></FONT></H1></CENTER>
<TD>
<UL>
<LI><A HREF="#name">NAME</A>
</LI><LI><A HREF="#synopsis">SYNOPSIS</A>
</LI><LI><A HREF="#description">DESCRIPTION</A>
</LI><LI><A HREF="#author">AUTHOR</A>
</LI><LI><A HREF="#revision">REVISION</A>
</LI></UL>

</TABLE>

<P><HR>
<A NAME="name">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
NAME</FONT></H1>
</A>


<P>
IO::AtomicFile - write a file which is updated atomically


<PRE></PRE>



<P><HR>
<A NAME="synopsis">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
SYNOPSIS</FONT></H1>
</A>


<PRE>    use IO::AtomicFile;
    </PRE>



<PRE>    # Write a temp file, and have it install itself when closed:
    my $FH = IO::AtomicFile-&gt;open(&quot;bar.dat&quot;, &quot;w&quot;);
    print $FH &quot;Hello!\n&quot;;
    $FH-&gt;close || die &quot;couldn't install atomic file: $!&quot;;    
    </PRE>



<PRE>    # Write a temp file, but delete it before it gets installed:
    my $FH = IO::AtomicFile-&gt;open(&quot;bar.dat&quot;, &quot;w&quot;);
    print $FH &quot;Hello!\n&quot;;
    $FH-&gt;delete; 
   </PRE>



<PRE>    # Write a temp file, but neither install it nor delete it:
    my $FH = IO::AtomicFile-&gt;open(&quot;bar.dat&quot;, &quot;w&quot;);
    print $FH &quot;Hello!\n&quot;;
    $FH-&gt;detach;   </PRE>



<PRE></PRE>



<P><HR>
<A NAME="description">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
DESCRIPTION</FONT></H1>
</A>


<P>
This module is intended for people who need to update files 
reliably in the face of unexpected program termination.


<P>
For example, you generally don't want to be halfway in the middle of
writing <I>/etc/passwd</I> and have your program terminate!  Even
the act of writing a single scalar to a filehandle is <I>not</I> atomic.


<P>
But this module gives you true atomic updates, via rename().
When you open a file <I>/foo/bar.dat</I> via this module, you are <I>actually</I> 
opening a temporary file <I>/foo/bar.dat..TMP</I>, and writing your
output there.   The act of closing this file (either explicitly
via close(), or implicitly via the destruction of the object)
will cause rename() to be called... therefore, from the point
of view of the outside world, the file's contents are updated
in a single time quantum.


<P>
To ensure that problems do not go undetected, the &quot;close&quot; method
done by the destructor will raise a fatal exception if the rename()
fails.  The explicit close() just returns undef.


<P>
You can also decide at any point to trash the file you've been 
building.


<PRE></PRE>



<P><HR>
<A NAME="author">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
AUTHOR</FONT></H1>
</A>


<P>
Eryq (<I><A HREF="mailto:eryq@zeegee.com">eryq@zeegee.com</A></I>).
President, ZeeGee Software Inc (<I><A HREF="http://www.zeegee.com">http://www.zeegee.com</A></I>).


<PRE></PRE>



<P><HR>
<A NAME="revision">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
REVISION</FONT></H1>
</A>


<P>
$Revision: 1.104 $


<P><HR>
<SMALL>
		Last updated: Fri Jan 15 01:07:46 1999 <BR>
		Generated by pod2coolhtml 1.101.  Want a copy?  Just email
		<A HREF="mailto:eryq@zeegee.com">eryq@zeegee.com</A>.
		(Yes, it's free.)
		</SMALL></BODY>
</HTML>
