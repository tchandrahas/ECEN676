<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 3.2//EN">
<!-- Generated by pod2coolhtml 1.101
  -- Using Pod::CoolHTML 1.104 , (C) 1997 by Eryq (eryq@zeegee.com).
  --
  -- DO NOT EDIT THIS HTML FILE! All your changes will be lost.
  -- Edit the POD or Perl file that was used to create it.
  -->
<HTML>

<HEAD>
<TITLE>IO::Wrap</TITLE>
</HEAD>
<BODY BGCOLOR=#CCCCCC LINK=#C00000 ALINK=#FF2020 VLINK=#900000>
<A NAME="__top"> </A><CENTER><TABLE BORDER=2 CELLPADDING=2 WIDTH=100%>

<TR>
<TD WIDTH=25% ALIGN=CENTER><B><FONT SIZE=+1>
<A HREF="Stringy.pm.html">IO::Stringy</A></FONT></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="AtomicFile.pm.html">IO::AtomicFile</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Lines.pm.html">IO::Lines</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Scalar.pm.html">IO::Scalar</A></SMALL></B></TD>

<TR>
<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="ScalarArray.pm.html">IO::ScalarArray</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="Stringy.pm.html">IO::Stringy</A></SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
IO::Wrap</SMALL></B></TD>

<TD WIDTH=25% ALIGN=CENTER><B><SMALL>
<A HREF="WrapTie.pm.html">IO::WrapTie</A></SMALL></B></TD>
</TABLE></CENTER>

<P><TABLE WIDTH="100%">

<TR VALIGN="TOP"><TD ALIGN="LEFT"><CENTER>
<H1><FONT SIZE=7 COLOR=#600020><B>IO::<BR>Wrap</B></FONT></H1></CENTER>
<TD>
<UL>
<LI><A HREF="#name">NAME</A>
</LI><LI><A HREF="#synopsis">SYNOPSIS</A>
</LI><LI><A HREF="#description">DESCRIPTION</A>
</LI><LI><A HREF="#notes">NOTES</A>
</LI><LI><A HREF="#warnings">WARNINGS</A>
</LI><LI><A HREF="#author">AUTHOR</A>
</LI></UL>

</TABLE>

<P><HR>
<A NAME="name">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
NAME</FONT></H1>
</A>


<P>
IO::Wrap - wrap raw filehandles in IO::Handle interface


<PRE></PRE>



<P><HR>
<A NAME="synopsis">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
SYNOPSIS</FONT></H1>
</A>


<PRE>   use IO::Wrap;
       </PRE>



<PRE>   # Do stuff with any kind of filehandle (including a bare globref), or 
   # any kind of blessed object that responds to a print() message.
   #
   sub do_stuff {
       my $fh = shift;         
       </PRE>



<PRE>       ### At this point, we have no idea what the user gave us... 
       ### a globref? a FileHandle? a scalar filehandle name?
       </PRE>



<PRE>       $fh = wraphandle($fh);  
        </PRE>



<PRE>       ### At this point, we know we have an IO::Handle-like object!
       </PRE>



<PRE>       $fh-&gt;print(&quot;Hey there!&quot;);
       ...
   }
    </PRE>



<PRE></PRE>



<P><HR>
<A NAME="description">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
DESCRIPTION</FONT></H1>
</A>


<P>
Let's say you want to write some code which does I/O, but you don't 
want to force the caller to provide you with a FileHandle or IO::Handle
object.  You want them to be able to say:


<PRE>    do_stuff(\*STDOUT);
    do_stuff('STDERR');
    do_stuff($some_FileHandle_object);
    do_stuff($some_IO_Handle_object);</PRE>



<P>
And even:


<PRE>    do_stuff($any_object_with_a_print_method);</PRE>



<P>
Sure, one way to do it is to force the caller to use tiehandle().  
But that puts the burden on them.  Another way to do it is to 
use <B>IO::Wrap</B>, which provides you with the following functions:


<PRE></PRE>


<DL>
<P><DT><B><A NAME="wraphandle">wraphandle SCALAR</A></B><DD>

This function will take a single argument, and &quot;wrap&quot; it based on
what it seems to be...

<UL>

<P><LI><B>A raw scalar filehandle name,</B> like <CODE>&quot;STDOUT&quot;</CODE> or <CODE>&quot;Class::HANDLE&quot;</CODE>.
In this case, the filehandle name is wrapped in an IO::Wrap object, 
which is returned.


<P><LI><B>A raw filehandle glob,</B> like <CODE>\*STDOUT</CODE>.
In this case, the filehandle glob is wrapped in an IO::Wrap object, 
which is returned.


<P><LI><B>A blessed FileHandle object.</B>
In this case, the FileHandle is wrapped in an IO::Wrap object if and only
if your FileHandle class does not support the <CODE>read()</CODE> method.


<P><LI><B>Any other kind of blessed object,</B> which is assumed to be already
conformant to the IO::Handle interface.
In this case, you just get back that object.

</UL>

</DL>


<PRE></PRE>



<P>
If you get back an IO::Wrap object, it will obey a basic subset of
the IO:: interface.  That is, the following methods (note: I said
<I>methods</I>, not named operators) should work on the thing you get back:


<PRE>    close 
    getline 
    getlines 
    print ARGS...
    read BUFFER,NBYTES
    seek POS,WHENCE
    tell </PRE>



<PRE></PRE>



<PRE></PRE>



<P><HR>
<A NAME="notes">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
NOTES</FONT></H1>
</A>


<P>
Clearly, when wrapping a raw external filehandle (like \*STDOUT), 
I didn't want to close the file descriptor when the &quot;wrapper&quot; object is
destroyed... since the user might not appreciate that!  Hence,
there's no DESTROY method in this class.


<P>
When wrapping a FileHandle object, however, I believe that Perl will 
invoke the FileHandle::DESTROY when the last reference goes away,
so in that case, the filehandle is closed if the wrapped FileHandle
really was the last reference to it.


<PRE></PRE>



<P><HR>
<A NAME="warnings">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
WARNINGS</FONT></H1>
</A>


<P>
This module does not allow you to wrap filehandle names which are given
as strings that lack the package they were opened in. That is, if a user 
opens FOO in package Foo, they must pass it to you either as <CODE>\*FOO</CODE> 
or as <CODE>&quot;Foo::FOO&quot;</CODE>.  However, <CODE>&quot;STDIN&quot;</CODE> and friends will work just fine.


<PRE></PRE>



<P><HR>
<A NAME="author">
<H1><FONT COLOR=#600020>
<A HREF="#__top"><IMG SRC="IO-stringy/h1bullet.gif" ALT="" BORDER="0"></A>
AUTHOR</FONT></H1>
</A>


<P>
Eryq (<I><A HREF="mailto:eryq@zeegee.com">eryq@zeegee.com</A></I>).
President, ZeeGee Software Inc (<I><A HREF="http://www.zeegee.com">http://www.zeegee.com</A></I>).


<P><HR>
<SMALL>
		Last updated: Fri Jan 15 01:07:55 1999 <BR>
		Generated by pod2coolhtml 1.101.  Want a copy?  Just email
		<A HREF="mailto:eryq@zeegee.com">eryq@zeegee.com</A>.
		(Yes, it's free.)
		</SMALL></BODY>
</HTML>
